---
title: "Migrating from CDKTF"
description: "Migrate your CDK for Terraform (CDKTF) projects to tfts"
---

tfts is a drop-in replacement for CDKTF. Migration requires updating imports and regenerating provider bindings.

## Migration Steps

### Step 1: Update Dependencies

Remove CDKTF packages and add tfts:

```bash
# Remove CDKTF and pre-built providers
npm remove cdktf cdktf-cli @cdktf/provider-aws @cdktf/provider-google

# Add tfts
npm install tfts
```

### Step 2: Update Core Imports

Change imports from `cdktf` to `tfts`:

```typescript
// Before
import { App, TerraformStack, TerraformOutput, TerraformVariable, Fn } from "cdktf";

// After
import { App, TerraformStack, TerraformOutput, TerraformVariable, Fn } from "tfts";
```

### Step 3: Update Provider Imports

CDKTF uses pre-built provider packages (`@cdktf/provider-*`). tfts generates providers locally.

```typescript
// Before (CDKTF pre-built providers)
import { GoogleProvider } from "@cdktf/provider-google/lib/provider";
import { ComputeInstance } from "@cdktf/provider-google/lib/compute-instance";

// After (tfts generated providers)
import { GoogleProvider } from "./.gen/providers/hashicorp/google/provider.js";
import { ComputeInstance } from "./.gen/providers/hashicorp/google/resources/compute-instance.js";
```

### Step 4: Regenerate Provider Bindings

```bash
npx tfts get
```

This reads `cdktf.json` (or `tfts.json`) and generates TypeScript classes in `.gen/`.

### Step 5: Update Configuration (Optional)

Rename `cdktf.json` to `tfts.json` if desired (both are supported):

```bash
mv cdktf.json tfts.json
```

## Automated Migration

### Using ast-grep

Automate import updates for large projects:

```bash
# Update core imports
ast-grep --pattern 'from "cdktf"' --rewrite 'from "tfts"' --lang ts -U .

# Note: Provider imports require manual update or custom patterns
```

### Provider Import Pattern

For AWS provider:
```bash
ast-grep --pattern 'from "@cdktf/provider-aws/lib/$NAME"' \
  --rewrite 'from "./.gen/providers/hashicorp/aws/$NAME.js"' \
  --lang ts -U .
```

## Import Path Reference

| CDKTF Import | tfts Import |
|--------------|-------------|
| `from "cdktf"` | `from "tfts"` |
| `from "@cdktf/provider-google/lib/provider"` | `from "./.gen/providers/hashicorp/google/provider.js"` |
| `from "@cdktf/provider-google/lib/compute-instance"` | `from "./.gen/providers/hashicorp/google/resources/compute-instance.js"` |
| `from "@cdktf/provider-aws/lib/provider"` | `from "./.gen/providers/hashicorp/aws/provider.js"` |
| `from "@cdktf/provider-aws/lib/s3-bucket"` | `from "./.gen/providers/hashicorp/aws/resources/s3-bucket.js"` |

## API Compatibility

tfts maintains API compatibility with CDKTF core constructs:

| Class | Status |
|-------|--------|
| `App` | Compatible |
| `TerraformStack` | Compatible |
| `TerraformResource` | Compatible |
| `TerraformDataSource` | Compatible |
| `TerraformOutput` | Compatible |
| `TerraformVariable` | Compatible |
| `TerraformLocal` | Compatible |
| `TerraformProvider` | Compatible |
| `Fn` | Compatible |
| `TerraformIterator` | Compatible |
| Backends (S3, GCS, etc.) | Compatible |

## Verification

After migration, verify the generated Terraform JSON is correct:

```bash
# Synthesize
npx tfts synth

# Compare output (if you have previous output)
diff -r old-cdktf.out/stacks/my-stack cdktf.out/stacks/my-stack

# Or run terraform plan to check
cd cdktf.out/stacks/my-stack
terraform init
terraform plan
```

## Troubleshooting

### Import Errors

If you see import errors after migration, ensure:
1. You ran `npx tfts get` to generate providers
2. Provider imports use `.js` extension (ESM requirement)
3. Provider paths match the structure in `.gen/`

### Missing Providers

Add any missing providers to your config:

```json
{
  "terraformProviders": [
    "hashicorp/google@~>6.0",
    "hashicorp/aws@~>5.0"
  ]
}
```

Then regenerate: `npx tfts get`
